<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GNU Radio&#39;s LORA_SDR Package: gr::lora_sdr::signal_detector Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio&#39;s LORA_SDR Package
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classgr_1_1lora__sdr_1_1signal__detector.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classgr_1_1lora__sdr_1_1signal__detector-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">gr::lora_sdr::signal_detector Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="signal__detector_8h_source.html">signal_detector.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for gr::lora_sdr::signal_detector:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classgr_1_1lora__sdr_1_1signal__detector.png" usemap="#gr::lora_5Fsdr::signal_5Fdetector_map" alt=""/>
  <map id="gr::lora_5Fsdr::signal_5Fdetector_map" name="gr::lora_5Fsdr::signal_5Fdetector_map">
<area href="classgr_1_1lora__sdr_1_1signal__detector__impl.html" alt="gr::lora_sdr::signal_detector_impl" shape="rect" coords="0,112,198,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aec78d09dbf92411a75236a678e54509c"><td class="memItemLeft" align="right" valign="top">typedef std::shared_ptr&lt; <a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html">signal_detector</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html#aec78d09dbf92411a75236a678e54509c">sptr</a></td></tr>
<tr class="separator:aec78d09dbf92411a75236a678e54509c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a2da46a36f9c3ffc575859bb10a2d8b0c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html#aec78d09dbf92411a75236a678e54509c">sptr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html#a2da46a36f9c3ffc575859bb10a2d8b0c">make</a> (uint8_t sf, uint8_t os_factor, double threshold, int margin, int fft_symb, int transp_len)</td></tr>
<tr class="memdesc:a2da46a36f9c3ffc575859bb10a2d8b0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This block becomes transparent after detecting a LoRa preamble at his input.  <a href="classgr_1_1lora__sdr_1_1signal__detector.html#a2da46a36f9c3ffc575859bb10a2d8b0c">More...</a><br /></td></tr>
<tr class="separator:a2da46a36f9c3ffc575859bb10a2d8b0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="aec78d09dbf92411a75236a678e54509c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec78d09dbf92411a75236a678e54509c">&#9670;&nbsp;</a></span>sptr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::shared_ptr&lt;<a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html">signal_detector</a>&gt; <a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html#aec78d09dbf92411a75236a678e54509c">gr::lora_sdr::signal_detector::sptr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2da46a36f9c3ffc575859bb10a2d8b0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2da46a36f9c3ffc575859bb10a2d8b0c">&#9670;&nbsp;</a></span>make()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html#aec78d09dbf92411a75236a678e54509c">sptr</a> gr::lora_sdr::signal_detector::make </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>sf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>os_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>margin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fft_symb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>transp_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This block becomes transparent after detecting a LoRa preamble at his input. </p>
<p>It's main purpose is to prevent the rest of the receiver to run continuously as the matched filtering steps are computationally intensive. The detection of a LoRa preamble is based on the FFT of 'fft_symb' dechirped symbols. If 'fft_symb' upchirps are in the FFT, a bin should have significantly more energy than others. The decision is taken based on the ratio between the amplitude of the main bin and the median amplitude of all bins. Once a detection is triggered, the block will become transparent for the previous 'margin' symbols and the next 'transp_len' symbols. The transparency duration is reset if a new trigger occurs before the end of the previous tranparency duration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf</td><td>Spreading factor </td></tr>
    <tr><td class="paramname">os_factor</td><td>Oversampling factor </td></tr>
    <tr><td class="paramname">threshold</td><td>Minimal ratio between the max FFT bin and the median of the bins.(a value of 10 has proven to be effective) </td></tr>
    <tr><td class="paramname">margin</td><td>Number of symbols preceding the detection that will be output at the detection time. (margin in case of detection triggering late on the preamble) </td></tr>
    <tr><td class="paramname">fft_symb</td><td>Number of symbols used in the FFT (should be less than the number of preamble upchirps, 4 is an efficient value for the FFT complexity) </td></tr>
    <tr><td class="paramname">transp_len</td><td>minimal duration in symbols after a triggered detection (englobing the preamble and payload symbol is a good idea) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="signal__detector_8h_source.html">signal_detector.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacegr.html">gr</a></li><li class="navelem"><a class="el" href="namespacegr_1_1lora__sdr.html">lora_sdr</a></li><li class="navelem"><a class="el" href="classgr_1_1lora__sdr_1_1signal__detector.html">signal_detector</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
